(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},t="#user-post-template",n="popup_opened",r=".popup__form",o=".post__image",i=".post__like-button",u=".post__like-counter",c="post__like-button_active",s=document.querySelector(".profile__edit"),a=document.querySelector(".profile__edit-avatar"),l=document.querySelector(".profile__add-button"),f=document.querySelector(".popup__form_type_edit"),p=document.querySelector(".popup__form_type_edit-avatar"),h=(document.querySelector(".popup__form_type_confirm"),document.querySelector(".popup__input_type_name")),y=document.querySelector(".popup__input_type_description"),_=document.querySelector(".popup__form_type_add-post");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n){var r=t.userdata,o=t.data,i=t.handleImageClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userdata=r,this._name=o.name,this._link=o.link,this._likes=o.likes,this._id=o._id,this._templateSelector=n,this._handleImageClick=i,this._handleLikeClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".post").cloneNode(!0)}},{key:"getPostId",value:function(){return this._id}},{key:"isLiked",value:function(e){return JSON.stringify(this._likes).includes(JSON.stringify(e))}},{key:"generateNewPost",value:function(){this._post=this._getTemplate();var e=this._post.querySelector(o);return this._setListeners(),e.src=this._link,e.alt=this._name,this._post.querySelector(".post__title").textContent=this._name,this._post}},{key:"_setListeners",value:function(){var e=this;this._likeButton=this._post.querySelector(i),this._likeButton.addEventListener("click",(function(){e._handleLikeClick(e._likeButton.classList.contains(c))})),this._post.querySelector(o).addEventListener("click",this._handleImageClick)}},{key:"like",value:function(e){var t=this._post.querySelector(i),n=this._post.querySelector(u);this._likes=e.likes.length,0===this._likes?n.textContent="":n.textContent=this._likes,t.classList.toggle(c)}}])&&d(t.prototype,n),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectors=t,this._form=n}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t,n,r){var o=e.querySelector("#".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}},{key:"_hideError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""}},{key:"_checkValidity",value:function(e,t,n){t.validity.valid?this._hideError(e,t,n):this._showError(e,t,t.validationMessage,n)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t,n){this._hasInvalidInput(e)?(t.classList.add(n.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(n.inactiveButtonClass),t.removeAttribute("disabled",!0))}},{key:"_setEventListeners",value:function(e,t){var n=this,r=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);this._toggleButtonState(r,o,t),r.forEach((function(i){i.addEventListener("input",(function(){n._checkValidity(e,i,t),n._toggleButtonState(r,o,t)}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form,this._selectors)}},{key:"resetValidation",value:function(){var e=this,t=Array.from(this._form.querySelectorAll(this._selectors.inputSelector)),n=this._form.querySelector(this._selectors.submitButtonSelector);t.forEach((function(t){return e._hideError(e._form,t,e._selectors)})),this._toggleButtonState(t,n,this._selectors)}}])&&m(t.prototype,n),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function u(e,t){var n,r=e.data,o=e.handleImageClick,c=e.handleLikeClick,s=e.handleDeleteClick;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,{data:r,handleImageClick:o,handleLikeClick:c},t))._handleDeleteClick=s,n}return t=u,(n=[{key:"_setListeners",value:function(){S(E(u.prototype),"_setListeners",this).call(this),this._post.querySelector(".post__delete").addEventListener("click",this._handleDeleteClick)}},{key:"delete",value:function(){this._post.remove(),this._post=null}}])&&g(t.prototype,n),u}(v);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"appendItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"renderLikes",value:function(e,t,n){this._post=e,this._likes=t.likes,this._isLiked=JSON.stringify(this._likes).includes(JSON.stringify(n)),this._likes.length>0&&(this._post.querySelector(u).textContent=this._likes.length),this._isLiked&&this._post.querySelector(i).classList.add(c)}},{key:"renderPosts",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&C(t.prototype,n),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".popup__close-button"),this._escClose=this._handleEscClose.bind(this),this._mousedownClose=this._handleMousedownClose.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add(n),document.addEventListener("keydown",this._escClose),this._popup.addEventListener("mousedown",this._mousedownClose)}},{key:"close",value:function(){this._popup.classList.remove(n),this._removeEventListeners()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleMousedownClose",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"setEventListeners",value:function(){this._closeButton.addEventListener("click",this.close.bind(this))}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keydown",this._escClose),this._popup.removeEventListener("mousedown",this._mousedownClose)}},{key:"renderLoading",value:function(e){this._submitButton=this._popup.querySelector(".popup__submit-button"),this._submitButton.textContent=e?"Сохранение...":"Сохранить"}}])&&j(t.prototype,r),e}();function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popup.querySelector(".popup__post-image"),t._title=t._popup.querySelector(".popup__post-title"),t}return t=u,(n=[{key:"open",value:function(e){T(A(u.prototype),"open",this).call(this),this._image.src=e.link,this._image.alt=e.name,this._title.textContent=e.name}}])&&I(t.prototype,n),u}(R);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(c,e);var t,n,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(o);if(i){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function c(e){var t,n=e.submiter,o=e.selector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,o))._submiter=n,t._popupForm=t._popup.querySelector(r),t._handleSubmit=function(){t._submiter(t._getInputValues())},t}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputs=this._popup.querySelectorAll(".popup__input"),this._inputValues={},this._inputs.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){N(K(c.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",this._handleSubmit)}},{key:"close",value:function(){N(K(c.prototype),"close",this).call(this),this._popup.querySelector(r).reset()}}])&&V(t.prototype,n),c}(R);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Q(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupForm=document.querySelector(".popup__form_type_confirm"),t}return t=u,(n=[{key:"handleDeleteRequest",value:function(e){this._deleteHandler=e}},{key:"setEventListeners",value:function(){var e=this;G(W(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._deleteHandler()}))}}])&&M(t.prototype,n),u}(R);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t){var n=t.name,r=t.description,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r),this._avatar=document.querySelector(o),this._userId=""}var t,n;return t=e,(n=[{key:"getUserId",value:function(){return this._userId}},{key:"getUserInfo",value:function(){return{name:this._name.textContent,description:this._description.textContent,avatar:this._avatar,id:this._userId}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.about,this._avatar.src=e.avatar,this._userId=e._id}}])&&Y(t.prototype,n),e}();function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.baseUrl,this._headers=t.headers,this._authKey=t.headers.authorization}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:"".concat(this._authKey)},method:"GET"}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:"".concat(this._authKey)},method:"GET"}).then(this._checkResponse)}},{key:"editUserProfile",value:function(e){var t=e.username,n=e.description;return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"setAvatar",value:function(e){var t=e.link;return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"addNewPost",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"likePost",value:function(e,t){return e?fetch("".concat(this._url,"/cards/likes/").concat(t),{headers:{authorization:"".concat(this._authKey)},method:"DELETE"}).then(this._checkResponse):fetch("".concat(this._url,"/cards/likes/").concat(t),{headers:{authorization:"".concat(this._authKey)},method:"PUT"}).then(this._checkResponse)}},{key:"deletePost",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{headers:{authorization:"".concat(this._authKey)},method:"DELETE"}).then(this._checkResponse)}}])&&ee(t.prototype,n),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-19",headers:{authorization:"41ef509f-c882-46a6-b392-9507337e8b9c","Content-Type":"application/json"}}),re=new b(e,f),oe=new b(e,_),ie=new b(e,p),ue=new Z({name:".profile__name",description:".profile__description",avatar:".profile__avatar"}),ce=[ne.getInitialCards(),ne.getUserInfo()];Promise.all(ce).then((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(n,r)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];ue.setUserInfo(u);var c=new P({renderer:function(e){var n=e.owner._id==u._id?f(e,t):a(e,"#post-template");c.renderLikes(n,e,u),c.appendItem(n)}},".posts__list"),s=new F({submiter:function(e){s.renderLoading(!0),ne.addNewPost(e).then((function(e){var n=f(e,t);c.prependItem(n),s.close()})).catch((function(e){return console.log("Ошибка: ".concat(e))})).finally((function(){return s.renderLoading(!1)}))},selector:".popup_type_add-post"}),a=function(e,t){var n=new v({userdata:u,data:e,handleImageClick:function(){return ae.open(e)},handleLikeClick:function(e){return ne.likePost(e,n.getPostId()).then((function(e){return n.like(e)})).catch((function(e){return console.log("Ошибка: ".concat(e))}))}},t);return n.generateNewPost()},f=function(e,t){var n=new L({data:e,handleImageClick:function(){return ae.open(e)},handleLikeClick:function(e){return ne.likePost(e,n.getPostId()).then((function(e){return n.like(e)})).catch((function(e){return console.log("Ошибка: ".concat(e))}))},handleDeleteClick:function(){return function(e){se.open(),se.handleDeleteRequest((function(){ne.deletePost(e.getPostId()).then(e.delete()).then(se.close()).catch((function(e){return console.log("Ошибка: ".concat(e))}))}))}(n)}},t);return n.generateNewPost()};l.addEventListener("click",(function(){oe.resetValidation(),s.open()})),c.renderPosts(i),s.setEventListeners()})).catch((function(e){return console.log("Ошибка: ".concat(e))}));var se=new X(".popup_type_confirm"),ae=new B(".popup_type_photo"),le=new F({submiter:function(e){le.renderLoading(!0),ne.setAvatar(e).then((function(e){ue.setUserInfo(e),le.close()})).catch((function(e){return console.log("Ошибка: ".concat(e))})).finally((function(){return le.renderLoading(!1)}))},selector:".popup_type_edit-avatar"}),fe=new F({submiter:function(e){fe.renderLoading(!0),ne.editUserProfile(e).then((function(e){ue.setUserInfo(e),fe.close()})).catch((function(e){return console.log("Ошибка: ".concat(e))})).finally((function(){return fe.renderLoading(!1)}))},selector:".popup_type_edit"});a.addEventListener("click",(function(){ie.resetValidation(),le.open()})),s.addEventListener("click",(function(){var e=ue.getUserInfo();h.value=e.name,y.value=e.description,re.resetValidation(),fe.open()})),le.setEventListeners(),ae.setEventListeners(),fe.setEventListeners(),se.setEventListeners(),ie.enableValidation(),re.enableValidation(),oe.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9kYXRhLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9zdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VyUG9zdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sIm5hbWVzIjpbInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNlbGVjdG9ycyIsImVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QXZhdGFyIiwiYWRkQnV0dG9uIiwiZm9ybUVkaXQiLCJmb3JtQXZhdGFyIiwiZm9ybU5hbWUiLCJmb3JtRGVzY3JpcHRpb24iLCJmb3JtQWRkUG9zdCIsIlBvc3QiLCJ0ZW1wbGF0ZSIsInVzZXJkYXRhIiwiZGF0YSIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX3VzZXJkYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfaWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ1c2VyRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbmNsdWRlcyIsIl9wb3N0IiwiX2dldFRlbXBsYXRlIiwicG9zdEltYWdlIiwiX3NldExpc3RlbmVycyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJwb3N0RGF0YSIsImxpa2VCdXR0b24iLCJMaWtlQ291bnRlciIsImxlbmd0aCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtIiwiX3NlbGVjdG9ycyIsIl9mb3JtIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInN1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrVmFsaWRpdHkiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImlucHV0cyIsInN1Ym1pdEJ1dHRvbiIsImlucHV0IiwiVXNlclBvc3QiLCJoYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJwb3N0IiwiX2lzTGlrZWQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwiX2VzY0Nsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9tb3VzZWRvd25DbG9zZSIsIl9oYW5kbGVNb3VzZWRvd25DbG9zZSIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzTG9hZGluZyIsIl9zdWJtaXRCdXR0b24iLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl90aXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRlciIsInNlbGVjdG9yIiwiX3N1Ym1pdGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVTdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRzIiwiX2lucHV0VmFsdWVzIiwidmFsdWUiLCJyZXNldCIsIlBvcHVwQ29uZmlybSIsImhhbmRsZXIiLCJfZGVsZXRlSGFuZGxlciIsIlVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJfZGVzY3JpcHRpb24iLCJfYXZhdGFyIiwiX3VzZXJJZCIsImFib3V0IiwiYXBpIiwib3B0aW9ucyIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2F1dGhLZXkiLCJhdXRob3JpemF0aW9uIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJ1c2VybmFtZSIsImJvZHkiLCJpc0xpa2VkIiwiY2FyZElkIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwiZGF0YVByb21pc2VzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJhbGwiLCJwb3N0c0RhdGEiLCJzZXRVc2VySW5mbyIsInBvc3RzIiwib3duZXIiLCJnZXRVc2VyUG9zdCIsImdldFBvc3QiLCJyZW5kZXJMaWtlcyIsImFwcGVuZEl0ZW0iLCJwb3B1cEFkZCIsImlucHV0VmFsdWVzIiwicmVuZGVyTG9hZGluZyIsImFkZE5ld1Bvc3QiLCJyZXN1bHQiLCJwcmVwZW5kSXRlbSIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInRlbXBsYXRlU2VsZWN0b3IiLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW4iLCJsaWtlUG9zdCIsImdldFBvc3RJZCIsImxpa2UiLCJnZW5lcmF0ZU5ld1Bvc3QiLCJwb3B1cENvbmZpcm0iLCJoYW5kbGVEZWxldGVSZXF1ZXN0IiwiZGVsZXRlUG9zdCIsImRlbGV0ZSIsImRlbGV0ZVJlcXVlc3QiLCJyZXNldFZhbGlkYXRpb24iLCJyZW5kZXJQb3N0cyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBBdmF0YXIiLCJzZXRBdmF0YXIiLCJwb3B1cEVkaXQiLCJlZGl0VXNlclByb2ZpbGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoibUJBQU8sSUFRTUEsRUFBbUIsQ0FDOUJDLGFBQWMsZUFDZEMsY0FBZSxnQkFDZkMscUJBQXNCLHdCQUN0QkMsb0JBQXFCLGdDQUNyQkMsZ0JBQWlCLDBCQUNqQkMsV0FBWSw2QkFHREMsRUFLUyxzQkFMVEEsRUFRVyxlQVJYQSxFQWVFLGVBZkZBLEVBdUJFLGVBdkJGQSxFQXlCTyxxQkF6QlBBLEVBMEJRLHNCQTFCUkEsRUEyQmUsMkJBSWZDLEVBQWFDLFNBQVNDLGNBQWMsa0JBQ3BDQyxFQUFhRixTQUFTQyxjQUFjLHlCQUNwQ0UsRUFBWUgsU0FBU0MsY0FBYyx3QkFDbkNHLEVBQVdK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QUF1QkYsT0FDdENHLFNBQVEsa0JBQU1nQixHQUFZeEIsZUFBYyxPQUU3QzNELFNWbEdlLDRCVXFHWHFGLEdBQVksSUFBSXZGLEVBQWMsQ0FDbENDLFNBQVUsU0FBQzJELEdBQ1QyQixHQUFVMUIsZUFBYyxHQUN4QnhDLEdBQUltRSxnQkFBZ0I1QixHQUNqQnZCLE1BQUssU0FBQTBCLEdBQ0pqQixHQUFTTSxZQUFZVyxHQUNyQndCLEdBQVUvRixXQUVYeUUsT0FBTSxTQUFBQyxHQUFLLE9BQUlDLFFBQVFDLElBQVIsa0JBQXVCRixPQUN0Q0csU0FBUSxrQkFBTWtCLEdBQVUxQixlQUFjLE9BRTNDM0QsU1ZuSGEscUJVc0hmdkgsRUFBV3VDLGlCQUFpQixTQUFTLFdBQ25DMkgsR0FBb0JxQyxrQkFDcEJHLEdBQVliLFVBR2RoTSxFQUFXMEMsaUJBQWlCLFNBQVMsV0FDbkMsSUFBTVosRUFBV3dJLEdBQVNHLGNBRTFCbEssUUFBaUJ1QixFQUFTWCxLQUMxQlgsUUFBd0JzQixFQUFTeUcsWUFFakM0QixHQUFrQnVDLGtCQUNsQkssR0FBVWYsVUFHWmEsR0FBWUQsb0JBQ1piLEdBQWVhLG9CQUNmRyxHQUFVSCxvQkFDVlAsR0FBYU8sb0JBQ2J2QyxHQUFvQjRDLG1CQUNwQjlDLEdBQWtCOEMsbUJBQ2xCN0MsR0FBaUI2QyxvQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTknLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICc0MWVmNTA5Zi1jODgyLTQ2YTYtYjM5Mi05NTA3MzM3ZThiOWMnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICAgIHByb2ZpbGVBdmF0YXI6ICcucHJvZmlsZV9fYXZhdGFyJyxcclxuICAgIHByb2ZpbGVOYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcclxuICAgIHBvc3RUZW1wbGF0ZTogJyNwb3N0LXRlbXBsYXRlJyxcclxuICAgIHVzZXJQb3N0VGVtcGxhdGU6ICcjdXNlci1wb3N0LXRlbXBsYXRlJyxcclxuICAgIHBvc3RzTGlzdDogJy5wb3N0c19fbGlzdCcsXHJcbiAgICBwb3B1cENsYXNzOiAncG9wdXAnLFxyXG4gICAgcG9wdXBJc09wZW5lZENsYXNzOiAncG9wdXBfb3BlbmVkJyxcclxuICAgIGNsb3NlQnV0dG9uOiAnLnBvcHVwX19jbG9zZS1idXR0b24nLFxyXG4gICAgcG9wdXBFZGl0OiAnLnBvcHVwX3R5cGVfZWRpdCcsXHJcbiAgICBwb3B1cEFkZFBvc3Q6ICcucG9wdXBfdHlwZV9hZGQtcG9zdCcsXHJcbiAgICBwb3B1cFdpdGhJbWFnZTogJy5wb3B1cF90eXBlX3Bob3RvJyxcclxuICAgIHBvcHVwQXZhdGFyOiAnLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXInLFxyXG4gICAgcG9wdXBDb25maXJtOiAnLnBvcHVwX3R5cGVfY29uZmlybScsXHJcbiAgICBwb3B1cEZvcm06ICcucG9wdXBfX2Zvcm0nLFxyXG4gICAgcG9wdXBDb25maXJtRm9ybTogJy5wb3B1cF9fZm9ybV90eXBlX2NvbmZpcm0nLFxyXG4gICAgcG9wdXBJbnB1dDogJy5wb3B1cF9faW5wdXQnLFxyXG4gICAgcG9wdXBJbWFnZTogJy5wb3B1cF9fcG9zdC1pbWFnZScsXHJcbiAgICBwb3B1cFRpdGxlOiAnLnBvcHVwX19wb3N0LXRpdGxlJyxcclxuICAgIHN1Ym1pdFNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcclxuICAgIHBvc3Q6ICcucG9zdCcsXHJcbiAgICBpbWFnZUNsYXNzOiAncG9zdF9faW1hZ2UnLFxyXG4gICAgcG9zdEltYWdlOiAnLnBvc3RfX2ltYWdlJyxcclxuICAgIHBvc3RUaXRsZTogJy5wb3N0X190aXRsZScsXHJcbiAgICBwb3N0TGlrZUJ1dHRvbjogJy5wb3N0X19saWtlLWJ1dHRvbicsXHJcbiAgICBwb3N0TGlrZUNvdW50ZXI6ICcucG9zdF9fbGlrZS1jb3VudGVyJyxcclxuICAgIHBvc3RMaWtlQnV0dG9uSXNBY3RpdmU6ICdwb3N0X19saWtlLWJ1dHRvbl9hY3RpdmUnLFxyXG4gICAgcG9zdERlbGV0ZUJ1dHRvbjogJy5wb3N0X19kZWxldGUnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LWF2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgZm9ybUNvbmZpcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9jb25maXJtJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRQb3N0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX3R5cGVfYWRkLXBvc3QnKTsiLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tICcuLi91dGlscy9kYXRhLmpzJztcclxuXHJcbmNsYXNzIFBvc3Qge1xyXG4gIGNvbnN0cnVjdG9yKHt1c2VyZGF0YSwgZGF0YSwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlTGlrZUNsaWNrfSwgdGVtcGxhdGUpIHtcclxuICAgIHRoaXMuX3VzZXJkYXRhID0gdXNlcmRhdGE7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSAoKSB7XHJcbiAgICBjb25zdCBwb3N0VGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvc3QpXHJcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBwb3N0VGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBnZXRQb3N0SWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWRcclxuICB9XHJcblxyXG4gIGlzTGlrZWQodXNlckRhdGEpIHtcclxuICAgIHJldHVybiAgSlNPTi5zdHJpbmdpZnkodGhpcy5fbGlrZXMpLmluY2x1ZGVzKEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSlcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlTmV3UG9zdCAoKSB7XHJcbiAgICB0aGlzLl9wb3N0ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIGNvbnN0IHBvc3RJbWFnZSA9IHRoaXMuX3Bvc3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9zdEltYWdlKTtcclxuICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xyXG5cclxuICAgIHBvc3RJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgcG9zdEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fcG9zdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3N0VGl0bGUpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fcG9zdDtcclxuICB9XHJcblxyXG4gIF9zZXRMaXN0ZW5lcnMgKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX3Bvc3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9zdExpa2VCdXR0b24pXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3JzLnBvc3RMaWtlQnV0dG9uSXNBY3RpdmUpKVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3N0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvc3RJbWFnZSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKTtcclxuICB9XHJcblxyXG4gIGxpa2UgKHBvc3REYXRhKSB7XHJcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fcG9zdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3N0TGlrZUJ1dHRvbik7XHJcbiAgICBjb25zdCBMaWtlQ291bnRlciA9IHRoaXMuX3Bvc3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9zdExpa2VDb3VudGVyKTtcclxuICAgIHRoaXMuX2xpa2VzID0gcG9zdERhdGEubGlrZXMubGVuZ3RoXHJcblxyXG4gICAgaWYgKHRoaXMuX2xpa2VzID09PSAwKSB7XHJcbiAgICAgIExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gJydcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHNlbGVjdG9ycy5wb3N0TGlrZUJ1dHRvbklzQWN0aXZlKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvc3QgfSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgZm9ybSkge1xyXG4gICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybVxyXG4gIH1cclxuXHJcbiAgX3Nob3dFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNlbGVjdG9ycykge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzWydpbnB1dEVycm9yQ2xhc3MnXSk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNbJ2Vycm9yQ2xhc3MnXSk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oaWRlRXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnNbJ2lucHV0RXJyb3JDbGFzcyddKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9yc1snZXJyb3JDbGFzcyddKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBzZWxlY3RvcnMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNlbGVjdG9ycykge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNbJ2luYWN0aXZlQnV0dG9uQ2xhc3MnXSk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnNbJ2luYWN0aXZlQnV0dG9uQ2xhc3MnXSk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgfVxyXG4gIH0gXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgc2VsZWN0b3JzICkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yc1snaW5wdXRTZWxlY3RvciddKSk7XHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNbJ3N1Ym1pdEJ1dHRvblNlbGVjdG9yJ10pO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uRWxlbWVudCwgc2VsZWN0b3JzKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uRWxlbWVudCwgc2VsZWN0b3JzKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtLCB0aGlzLl9zZWxlY3RvcnMpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3JzWydpbnB1dFNlbGVjdG9yJ10pKTtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnNbJ3N1Ym1pdEJ1dHRvblNlbGVjdG9yJ10pO1xyXG5cclxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2hpZGVFcnJvcih0aGlzLl9mb3JtLCBpbnB1dCwgdGhpcy5fc2VsZWN0b3JzKSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIHN1Ym1pdEJ1dHRvbiwgdGhpcy5fc2VsZWN0b3JzKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgfSIsImltcG9ydCB7UG9zdH0gZnJvbSAnLi9Qb3N0LmpzJ1xyXG5pbXBvcnQge3NlbGVjdG9yc30gZnJvbSAnLi4vdXRpbHMvZGF0YS5qcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJQb3N0IGV4dGVuZHMgUG9zdCB7XHJcbiAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2t9LCB0ZW1wbGF0ZSkge1xyXG4gICAgc3VwZXIoe2RhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUxpa2VDbGlja30sIHRlbXBsYXRlKTtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgfVxyXG4gIF9zZXRMaXN0ZW5lcnMgKCkge1xyXG4gICAgc3VwZXIuX3NldExpc3RlbmVycygpXHJcbiAgICB0aGlzLl9wb3N0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvc3REZWxldGVCdXR0b24pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlICgpIHtcclxuICAgIHRoaXMuX3Bvc3QucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9wb3N0ID0gbnVsbDtcclxuICB9XHJcbn0iLCJpbXBvcnQge3NlbGVjdG9yc30gZnJvbSAnLi4vdXRpbHMvZGF0YS5qcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMaWtlcyAocG9zdCwgZGF0YSwgdXNlcmRhdGEpIHtcclxuICAgIHRoaXMuX3Bvc3QgPSBwb3N0XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXNcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9saWtlcykuaW5jbHVkZXMoSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEpKVxyXG5cclxuICAgIGlmKHRoaXMuX2xpa2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5fcG9zdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3N0TGlrZUNvdW50ZXIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoOyBcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9wb3N0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvc3RMaWtlQnV0dG9uKS5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5wb3N0TGlrZUJ1dHRvbklzQWN0aXZlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyUG9zdHMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfSAgIFxyXG59IiwiaW1wb3J0IHsgc2VsZWN0b3JzIH0gZnJvbSAnLi4vdXRpbHMvZGF0YS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jbG9zZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9lc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9tb3VzZWRvd25DbG9zZSA9IHRoaXMuX2hhbmRsZU1vdXNlZG93bkNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMucG9wdXBJc09wZW5lZENsYXNzKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9lc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9tb3VzZWRvd25DbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzLnBvcHVwSXNPcGVuZWRDbGFzcyk7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlIChldnQpIHtcclxuICAgIGlmKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVNb3VzZWRvd25DbG9zZSAoZXZ0KSB7XHJcbiAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcnMucG9wdXBDbGFzcykpe1xyXG4gICAgICB0aGlzLmNsb3NlKClcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fbW91c2Vkb3duQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyAoaXNMb2FkaW5nKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRTZWxlY3RvcilcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJ1xyXG4gICAgfVxyXG5cclxuXHJcbiAgfSBcclxufSIsImltcG9ydCAgUG9wdXAgIGZyb20gJy4vUG9wdXAuanMnO1xyXG5pbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tICcuLi91dGlscy9kYXRhLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wdXBJbWFnZSk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwVGl0bGUpO1xyXG4gIH1cclxuICBvcGVuKGlucHV0KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGlucHV0Lmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBpbnB1dC5uYW1lO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBpbnB1dC5uYW1lO1xyXG4gIH1cclxufSIsImltcG9ydCAgUG9wdXAgIGZyb20gJy4vUG9wdXAuanMnO1xyXG5pbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tICcuLi91dGlscy9kYXRhLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzdWJtaXRlciwgc2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0ZXIgPSBzdWJtaXRlcjtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRm9ybSk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfVxyXG4gIH0gXHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLnBvcHVwSW5wdXQpO1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXNcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXQpOyBcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRm9ybSkucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgIFBvcHVwICBmcm9tICcuL1BvcHVwLmpzJztcclxuaW1wb3J0IHsgc2VsZWN0b3JzIH0gZnJvbSAnLi4vdXRpbHMvZGF0YS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKVxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wdXBDb25maXJtRm9ybSk7XHJcbiAgfVxyXG4gIGhhbmRsZURlbGV0ZVJlcXVlc3QoaGFuZGxlcikge1xyXG4gICAgdGhpcy5fZGVsZXRlSGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9kZWxldGVIYW5kbGVyKCk7XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7bmFtZSwgZGVzY3JpcHRpb24sIGF2YXRhcn0pe1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xyXG4gICAgdGhpcy5fdXNlcklkID0gJydcclxuICB9XHJcblxyXG4gIGdldFVzZXJJZCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbyAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLFxyXG4gICAgICBpZDogdGhpcy5fdXNlcklkXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHNldFVzZXJJbmZvICggZGF0YSApIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLl9pZDtcclxuICB9XHJcbn0iLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcydcclxuaW1wb3J0IHsgUG9zdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9zdC5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgVXNlclBvc3QgZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VyUG9zdC5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgZWRpdEF2YXRhcixcclxuICBhZGRCdXR0b24sXHJcbiAgZm9ybUVkaXQsXHJcbiAgZm9ybUF2YXRhcixcclxuICBmb3JtTmFtZSxcclxuICBmb3JtRGVzY3JpcHRpb24sXHJcbiAgZm9ybUFkZFBvc3QsXHJcbiAgb3B0aW9uc1xyXG59IGZyb20gJy4uL3V0aWxzL2RhdGEuanMnO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShvcHRpb25zKTtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWRpdCk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtQWRkUG9zdCk7XHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtQXZhdGFyKTtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IHNlbGVjdG9ycy5wcm9maWxlTmFtZSwgXHJcbiAgZGVzY3JpcHRpb246IHNlbGVjdG9ycy5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgYXZhdGFyOiBzZWxlY3RvcnMucHJvZmlsZUF2YXRhclxyXG59KTtcclxuXHJcbmNvbnN0IGRhdGFQcm9taXNlcyA9IFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXTtcclxuXHJcblByb21pc2UuYWxsKGRhdGFQcm9taXNlcylcclxuICAudGhlbihkYXRhID0+IHtcclxuICAgIGNvbnN0IFtwb3N0c0RhdGEsIHVzZXJEYXRhXSA9IGRhdGE7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcblxyXG4gICAgY29uc3QgcG9zdHMgPSBuZXcgU2VjdGlvbih7XHJcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBvc3QgPSBpdGVtLm93bmVyLl9pZCA9PSB1c2VyRGF0YS5faWRcclxuICAgICAgICA/IGdldFVzZXJQb3N0KGl0ZW0sIHNlbGVjdG9ycy51c2VyUG9zdFRlbXBsYXRlKVxyXG4gICAgICAgIDogZ2V0UG9zdChpdGVtLCBzZWxlY3RvcnMucG9zdFRlbXBsYXRlKTtcclxuICAgICAgICBwb3N0cy5yZW5kZXJMaWtlcyhwb3N0LCBpdGVtLCB1c2VyRGF0YSlcclxuICAgICAgICBwb3N0cy5hcHBlbmRJdGVtKHBvc3QpO1xyXG4gICAgICB9XHJcbiAgICB9LCBzZWxlY3RvcnMucG9zdHNMaXN0KTtcclxuXHJcbiAgICBjb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgICAgc3VibWl0ZXI6IChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgICAgIHBvcHVwQWRkLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuICAgICAgICBhcGkuYWRkTmV3UG9zdChpbnB1dFZhbHVlcylcclxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBnZXRVc2VyUG9zdChyZXN1bHQsIHNlbGVjdG9ycy51c2VyUG9zdFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgcG9zdHMucHJlcGVuZEl0ZW0ocG9zdCk7XHJcbiAgICAgICAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cEFkZC5yZW5kZXJMb2FkaW5nKGZhbHNlKSlcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0b3I6IHNlbGVjdG9ycy5wb3B1cEFkZFBvc3RcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGdldFBvc3QgPSAoaW5wdXQsIHRlbXBsYXRlU2VsZWN0b3IpID0+IHtcclxuICAgICAgY29uc3QgcG9zdCA9IG5ldyBQb3N0KHtcclxuICAgICAgICB1c2VyZGF0YTogdXNlckRhdGEsXHJcbiAgICAgICAgZGF0YTogaW5wdXQsXHJcbiAgICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihpbnB1dCksXHJcbiAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoaXNMaWtlZCkgPT4gYXBpLmxpa2VQb3N0KGlzTGlrZWQsIHBvc3QuZ2V0UG9zdElkKCkpXHJcbiAgICAgICAgICAudGhlbihkYXRhID0+IHBvc3QubGlrZShkYXRhKSlcclxuICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfWApKVxyXG4gICAgICAgIH0sdGVtcGxhdGVTZWxlY3Rvcik7XHJcbiAgICAgIGNvbnN0IHBvc3RFbGVtZW50ID0gcG9zdC5nZW5lcmF0ZU5ld1Bvc3QoKTtcclxuICAgIFxyXG4gICAgICByZXR1cm4gcG9zdEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsZXRlUmVxdWVzdCA9IChwb3N0KSA9PiB7XHJcbiAgICAgIHBvcHVwQ29uZmlybS5vcGVuKCk7XHJcbiAgICAgIHBvcHVwQ29uZmlybS5oYW5kbGVEZWxldGVSZXF1ZXN0KCgpID0+IHtcclxuICAgICAgICBhcGkuZGVsZXRlUG9zdChwb3N0LmdldFBvc3RJZCgpKVxyXG4gICAgICAgICAgLnRoZW4ocG9zdC5kZWxldGUoKSlcclxuICAgICAgICAgIC50aGVuKHBvcHVwQ29uZmlybS5jbG9zZSgpKVxyXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdldFVzZXJQb3N0ID0gKGlucHV0LCB0ZW1wbGF0ZVNlbGVjdG9yKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBvc3QgPSBuZXcgVXNlclBvc3Qoe1xyXG4gICAgICAgIGRhdGE6IGlucHV0LFxyXG4gICAgICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IHBvcHVwV2l0aEltYWdlLm9wZW4oaW5wdXQpLFxyXG4gICAgICAgIGhhbmRsZUxpa2VDbGljazogKGlzTGlrZWQpID0+IGFwaS5saWtlUG9zdChpc0xpa2VkLCBwb3N0LmdldFBvc3RJZCgpKVxyXG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiBwb3N0Lmxpa2UoZGF0YSkpXHJcbiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn1gKSksXHJcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICgpID0+IGRlbGV0ZVJlcXVlc3QocG9zdCksXHJcbiAgICAgIH0sdGVtcGxhdGVTZWxlY3Rvcik7XHJcbiAgICAgIGNvbnN0IHBvc3RFbGVtZW50ID0gcG9zdC5nZW5lcmF0ZU5ld1Bvc3QoKTtcclxuICAgIFxyXG4gICAgICByZXR1cm4gcG9zdEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgICBwb3B1cEFkZC5vcGVuKCk7XHJcbiAgICB9KTtcclxuICAgIHBvc3RzLnJlbmRlclBvc3RzKHBvc3RzRGF0YSk7XHJcblxyXG4gICAgcG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9KVxyXG4gIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfWApKVxyXG5cclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShzZWxlY3RvcnMucG9wdXBDb25maXJtKTtcclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnBvcHVwV2l0aEltYWdlKTtcclxuXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHN1Ym1pdGVyOiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuICAgIGFwaS5zZXRBdmF0YXIoaW5wdXRWYWx1ZXMpXHJcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcclxuICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn1gKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSkpXHJcbiAgfSxcclxuICBzZWxlY3Rvcjogc2VsZWN0b3JzLnBvcHVwQXZhdGFyXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oeyBcclxuICBzdWJtaXRlcjogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBwb3B1cEVkaXQucmVuZGVyTG9hZGluZyh0cnVlKVxyXG4gICAgYXBpLmVkaXRVc2VyUHJvZmlsZShpbnB1dFZhbHVlcylcclxuICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpXHJcbiAgICAgICAgcG9wdXBFZGl0LmNsb3NlKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwRWRpdC5yZW5kZXJMb2FkaW5nKGZhbHNlKSlcclxuICB9LFxyXG4gIHNlbGVjdG9yOiBzZWxlY3RvcnMucG9wdXBFZGl0XHJcbn0pO1xyXG5cclxuZWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxufSlcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBmb3JtTmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgZm9ybURlc2NyaXB0aW9uLnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247XHJcblxyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XHJcbiAgICB0aGlzLl91cmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgdGhpcy5fYXV0aEtleSA9IG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIH0gIFxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgaWYocmVzcG9uc2Uub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzcG9uc2Uuc3RhdHVzfWApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IGAke3RoaXMuX2F1dGhLZXl9YFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgICB9XHJcbiAgICApXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dGhpcy5fYXV0aEtleX1gXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJQcm9maWxlKHt1c2VybmFtZSwgZGVzY3JpcHRpb259KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lOiB1c2VybmFtZSxcclxuICAgICAgICAgIGFib3V0OiBkZXNjcmlwdGlvblxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKHtsaW5rfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCAse1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGF2YXRhcjogbGlua1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG5cclxuICBhZGROZXdQb3N0KHtuYW1lLCBsaW5rfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcblxyXG4gIGxpa2VQb3N0KGlzTGlrZWQsIGNhcmRJZCkge1xyXG4gICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IGAke3RoaXMuX2F1dGhLZXl9YFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJ1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0aGlzLl9hdXRoS2V5fWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlbGV0ZVBvc3QoY2FyZElkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0aGlzLl9hdXRoS2V5fWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURSdcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9